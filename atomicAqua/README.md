This is a project generated by the agentcore create --template basic CLI tool!

# Layout

There are two directories generated, `src/` and `test/`. At the root, there is a `.gitignore` file, a `.bedrock_agentcore.yaml` file
which is used for other `agentcore` commands like `deploy`, `dev`, and `invoke`.

## src/

The main entrypoint to your app is defined in `src/main.py`. Using the AgentCore SDK `@app.entrypoint` decorator, this file defines a Starlette ASGI app with the chosen Agent framework SDK
running within.

`src/mcp_client/client.py` implements an MCP client using the library from your chosen Agent framework SDK.

`src/model/load.py` instantiates your chosen model provider.

## test/

Tests are not defined by default. Add your own pytest definitions here.

# Developing locally

If installation was successful, a virtual environment is already created with dependencies installed.

Run `source .venv/bin/activate` before developing.

`agentcore dev` will start a local server on 0.0.0.0:8080.

In a new terminal, you can invoke that server with:

`agentcore invoke --dev "What can you do"`

# Deployment

If you want to customize your project, you can first run `agentcore configure` before deploying. Otherwise, the default project settings
will work out of the box.

After providing credentials, `agentcore deploy` will deploy your project into Amazon Bedrock AgentCore.

Use `agentcore invoke` to invoke your deployed agent.


# HOW TO CALL THE API 

# 0. First, create a test user (one-time setup)
aws cognito-idp admin-create-user \
  --user-pool-id eu-central-1_62fQskXAX \
  --username testuser@example.com \
  --temporary-password TempPass123! \
  --user-attributes Name=email,Value=testuser@example.com Name=email_verified,Value=true \
  --region eu-central-1

# Then set a permanent password
aws cognito-idp admin-set-user-password \
  --user-pool-id eu-central-1_62fQskXAX \
  --username testuser@example.com \
  --password SecurePass123! \
  --permanent \
  --region eu-central-1

# 1. Get access token
TOKEN=$(aws cognito-idp initiate-auth \
  --auth-flow USER_PASSWORD_AUTH \
  --client-id 5urnv7vc4qukdrm5q2dfutv7lc \
  --auth-parameters USERNAME=testuser@example.com,PASSWORD=SecurePass123! \
  --region eu-central-1 \
  --query 'AuthenticationResult.AccessToken' \
  --output text)

# 2. Call the API with Bearer token
curl -X POST https://wl8qnikwuc.execute-api.eu-central-1.amazonaws.com/prod/invoke \
  -H "Content-Type: application/json" \
  -H "Authorization: Bearer $TOKEN" \
  -d '{"prompt": "Add 5 and 7", "session_id": "test-session-1", "user_id": "demo-user"}' \
  --no-buffer